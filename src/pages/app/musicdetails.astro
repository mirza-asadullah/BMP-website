---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";

// Images
const bannerImg = "/images/chat/banner.png";
const mobileBannerImg = "/images/mobileview.png";
const phoneImg = "/images/smartphonemusic.png";

const heartIcon = "/images/heartLogo.png";
const dollarIcon = "/images/doller.png";
---

<Layout
  title="BeMind Power - Nutrition Details"
  description="Recetas y planes de alimentación"
  bodyClass="chat-detail-page"
>
  <div
    class="chat-detail-wrap relative min-h-screen w-full overflow-x-hidden bg-[#0A0A1B]"
  >
    <Header />

    <main
      class="relative w-full md:min-h-screen md:h-auto pt-24 max-h-[750px]:pt-20 md:pt-4 px-0 md:px-8 lg:px-16 flex flex-col-reverse md:flex-row items-center justify-end md:justify-center gap-auto md:gap-20 z-10 overflow-hidden md:overflow-visible max-h-[750px]:h-auto max-h-[750px]:overflow-y-auto"
    >
      <!-- Background Effect -->
      <div class="absolute inset-0 z-0">
        <picture>
          <source media="(max-width: 768px)" srcset={mobileBannerImg} />
          <img src={bannerImg} alt="" class="w-full h-full object-cover" />
        </picture>
      </div>

      <!-- Helper Icons (Mobile Only) -->
      <div
        class="absolute inset-x-0 bottom-0 top-0 z-20 pointer-events-none md:hidden overflow-hidden"
      >
        <!-- Heart Icon (Left) - Overlapping phone, blurred -->
        <img
          src={heartIcon}
          alt=""
          class="absolute top-[70%] max-h-[750px]:top-[65%] left-[-0px] w-20 h-auto blur-[1.9px] scale-100"
        />

        <!-- Dollar Icon (Bottom Right) - Blurred -->
        <img
          src={dollarIcon}
          alt=""
          class="absolute bottom-[-20px] right-[-20px] w-20 z-5 h-auto blur-[3px] scale-190"
        />

        <!-- Overlay for Phone & Icons -->
        <img
          src="/images/phone-overlay.png"
          alt=""
          class="absolute bottom-[-0px] left-1/2 -translate-x-1/2 w-[150%] max-w-[600px] h-auto z-10 pointer-events-none mix-blend-screen"
        />

        <!-- Mobile Buttons (Moved here for z-index visibility) -->
        <div
          class="absolute bottom-[5%] max-h-[750px]:bottom-[2%] left-0 right-0 flex flex-col items-center gap-[8px] md:hidden z-30 pointer-events-auto"
        >
          <a
            href="#"
            class="apps-store-btn w-[238px] h-[30px] !bg-black/90 !border-white/20 !backdrop-blur-xl"
            aria-label="Download on the App Store"
          >
            <img
              src="/images/app-store-badge.svg"
              alt="Download on the App Store"
              class="h-[12px]"
            />
          </a>
          <a
            href="#"
            class="apps-store-btn w-[238px] h-[30px] !bg-black/90 !border-white/20 !backdrop-blur-xl"
            aria-label="Get it on Google Play"
          >
            <img
              src="/images/google-play-badge.svg"
              alt="Get it on Google Play"
              class="h-[12px]"
            />
          </a>
        </div>
      </div>

      <!-- Left Content: Smartphone -->
      <div
        class="relative z-10 w-full flex flex-col items-center justify-end h-full md:h-auto md:justify-center mb-[-250px] max-h-[750px]:mb-[-50px] md:mb-0 transform scale-y-100 mt-0  md:mt-20 origin-bottom phone-detail-container"
      >
        <div
          class="relative w-[90%] max-h-[750px]:w-[10%] md:w-full md:max-w-[450px]"
        >
          <img
            src={phoneImg}
            alt="App Interface"
            class="w-full h-auto"
            transition:name="phone-morph"
          />
        </div>
      </div>

      <!-- Right Content: Text & Buttons -->
      <div
        class="relative z-10 w-full md:max-w-2xl text-white flex flex-col  items-center md:items-start mr-0 md:mr-20 mt-[60px] max-h-[750px]:mt-6 md:mt-0 text-left md:text-left px-6 md:px-0"
      >
        <h1 class="mb-6 tracking-tight text-white music-heading">
          <span data-i18n="nutrition.detail.title"
            >Conecta tus dispositivos, recibe recetas.</span
          >
        </h1>

        <!-- Features List -->
        <ul
          class="space-y-1 md:space-y-3 mb-10 w-[259px] md:w-full flex flex-col items-start md:items-start pl-0 md:pl-2 music-list"
        >
          <li class="flex items-center gap-3 text-white">
            <span class="text-white text-xl md:hidden">•</span>
            <span class="text-[#4F46E5] text-xl hidden md:inline">✓</span>
            <span data-i18n="nutrition.detail.feature1"
              >Recomendaciones según ingredientes que tienes</span
            >
          </li>
          <li class="flex items-center gap-3 text-white">
            <span class="text-white text-xl md:hidden">•</span>
            <span class="text-[#4F46E5] text-xl hidden md:inline">✓</span>
            <span data-i18n="nutrition.detail.feature2"
              >Compra lo que falta con un clic</span
            >
          </li>
          <li class="flex items-center gap-3 text-white">
            <span class="text-white text-xl md:hidden">•</span>
            <span class="text-[#4F46E5] text-xl hidden md:inline">✓</span>
            <span data-i18n="nutrition.detail.feature3"
              >Planes de alimentación saludables</span
            >
          </li>
        </ul>

        <!-- Download Buttons (Desktop) -->
        <div
          class="apps-badges w-full hidden md:flex flex-col items-center md:items-center gap-6"
        >
          <a
            href="#"
            class="apps-store-btn"
            aria-label="Download on the App Store"
          >
            <img
              src="/images/app-store-badge.svg"
              alt="Download on the App Store"
            />
          </a>
          <a href="#" class="apps-store-btn" aria-label="Get it on Google Play">
            <img
              src="/images/google-play-badge.svg"
              alt="Get it on Google Play"
            />
          </a>
        </div>
      </div>
    </main>

    <!-- Back Arrow Icon -->
    <a
      href="/app"
      class="back-arrow hidden md:inline-flex absolute top-[130px] md:top-[200px] left-4 md:left-40 z-[1001] text-white hover:text-[#4F46E5] transition-colors p-3 border border-transparent hover:border-[#4F46E5]/50 rounded-full bg-white/10 backdrop-blur-sm hover:bg-white/20"
    >
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M19 12H5M12 19L5 12L12 5"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"></path>
      </svg>
    </a>
  </div>
</Layout>

<script>
  // Detect back arrow clicks
  document.addEventListener("click", (e) => {
    const backArrow = (e.target as HTMLElement).closest(".back-arrow");
    if (backArrow) {
      document.documentElement.setAttribute("data-nav-back", "true");

      // Disable image transition specifically for back navigation
      const phoneImg = document.querySelector(".phone-detail-container img");
      if (phoneImg) {
        (phoneImg as HTMLElement).style.viewTransitionName = "none";
      }
    }
  });
</script>

<style>
  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-15px);
    }
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  @keyframes shimmer {
    100% {
      transform: translateX(200%);
    }
  }

  .animate-shimmer {
    animation: shimmer 1.5s infinite;
  }

  .store-btn {
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  }

  /* Apps Buttons Styles */
  @keyframes blink-shadow {
    0%,
    100% {
      box-shadow:
        0 4px 14px rgba(38, 4, 209, 0.7),
        0 -4px 14px rgba(25, 41, 255, 0.9);
    }
    50% {
      box-shadow:
        0 4px 25px rgba(38, 4, 209, 1),
        0 -4px 25px rgba(25, 41, 255, 1);
    }
  }

  .apps-store-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 238px;
    height: 30px;
    padding: 0 18px;
    background: rgba(0, 0, 0, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 50px;
    box-shadow:
      0 4px 14px rgba(38, 4, 209, 0.7),
      0 -4px 14px rgba(25, 41, 255, 0.9);
    text-decoration: none;
    transition: transform 0.2s;
    animation: blink-shadow 2s infinite;
  }

  .apps-store-btn:hover,
  .apps-store-btn:active {
    transform: scale(1.05);
    animation: none; /* Stop blinking on hover */
    box-shadow: 0 6px 20px rgba(55, 27, 190, 0.8);
  }

  .apps-store-btn img {
    height: 12px;
    width: auto;
    max-width: 100%;
    object-fit: contain;
  }

  /* Music Heading */
  .music-heading {
    width: 249px;
    font-family: "OPTIFuturaDemiBold", sans-serif;
    font-weight: 700;
    font-style: normal;
    font-size: 24px;
    line-height: 32px;
    letter-spacing: 0;
  }

  /* Music List */
  .music-list {
    font-family: "Neometric", sans-serif;
    font-size: 12px;
    line-height: 100%;
    font-weight: 400;
    letter-spacing: 0;
  }

  @media (min-width: 768px) {
    .apps-store-btn {
      width: 250px;
      height: 70px;
    }
    .apps-store-btn img {
      height: 50px;
    }

    .music-heading {
      width: 100%;
      font-family: "OPTIFutura-ExtraBlackCond", sans-serif;
      font-size: clamp(36px, 5vw, 64px);
      line-height: 1.1;
      font-weight: 500;
    }

    .music-list {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      font-family: "Neometric", sans-serif;
      font-size: clamp(16px, 2vw, 24px);
      line-height: 100%;
      font-weight: 400;
    }
  }
</style>
